from . import dew_point
from . import soil_sensor_analysis

all_list = []
all_dict = {}

# dew_point.calculation_methods 활용
if hasattr(dew_point, "calculation_methods"):
    all_list.extend(dew_point.calculation_methods.keys())
    all_dict.update(dew_point.calculation_methods)

# soil_sensor_analysis도 동일하게 처리
if hasattr(soil_sensor_analysis, "calculation_methods"):
    all_list.extend(soil_sensor_analysis.calculation_methods.keys())
    all_dict.update(soil_sensor_analysis.calculation_methods)

__all__ = all_list

# all_dict: {함수명: 함수객체} 형태로 제공

# 편차 제어, 임계값 제어, pid제어, 조건부 제어, 시간대별 제어, 타이머 제어(1시간에 5분 가동)
# ON_OFF Time Control, 
# PID Control,
# Time Control,
"""
# 양액 공급펌프(관수/급액 펌프)
# 토양(또는 배지) 수분상태, 관수 스케줄(시간), 작물 성장 단계 등이 이 펌프를 언제 얼마나 
# 가동할지를 결정하는 변수입니다. 예를 들어, 토양 수분센서나 팽압 센서로 측정한 값이
# 임계치 밑으로 떨어지면 펌프를 가동하여 물을 주는 것이 한 방법이고
, 또는 설정된 시간표(하루 n회, 각 회당 m분 등)에 따라 펌프를 돌리는 것이 일반적입니다
. 또한 작물의 종류와 크기에 따라 1회 관수량이나 간격을 조절하는데, 이는 보통 일사량 
적산값(햇빛 많이 받으면 증산 많으므로 더 자주 물 주기)이나 시간대(더운 오후에 자주, 밤에는 드물게)로 결정합니다
. 요약하면, 공급펌프 제어의 입력은 스케줄/센서 기반 수분 요구 신호입니다.
가능한 제어 방식: 가장 널리 쓰이는 방식은 타이머 스케줄 제어입니다. 예를 들어 오전 8시,
11시, 오후 2시, 5시에 각 5분씩 펌프를 돌려 관수하는 식으로 프로그램해두는 것입니다. 
이는 작물과 계절에 따라 간격과 시간을 조정하며, 미세하게는 일사량에 따라 가변 스케줄을 쓰기도 합니다
(구름 낀 날은 3회, 맑은 날은 5회 등)
. 다른 방식으로 피드백 제어가 있는데, 토양 수분센서로 실시간 토양 수분함량을 모니터하여 건조해지면 
펌프를 켜고, 충분히 적시면 끄는 임계점 제어를 할 수 있습니다. 이 경우 토양 수분 이력에 히스테리시스를
두어 잦은 ON/OFF를 방지합니다. 또한 수동 모드로 전환하면 사용자가 버튼 하나로 펌프를 일정 시간 
가동시켜주는 제어도 병행됩니다 (시설 세척이나 긴급 관수용). 몇몇 시스템은 압력 제어도 이루어지는데, 
배관에 압력센서가 있어 목표 압력을 유지하도록 펌프 인버터 속도를 제어하기도 합니다. 그러나 일반적인 
원예시설에서는 압력보다는 유량 고정, 시간 제어에 더 초점을 둡니다.
자동 제어 및 수동 제어 예시: 자동 제어 예로, 스마트 관수 시스템에서 아침 해 뜰 때 자동으로 1차 
관수를 하고, 이후 햇빛량을 누적 계산하여 5MJ/m²당 1회씩 펌프를 돌려주는 방식이 있습니다
. 이렇게 하면 날이 흐리면 관수 횟수가 줄고, 맑으면 많아져서 작물에 맞는 급액이 이루어집니다. 
또 다른 자동 예로 토마토 수경재배의 경우, EC/pH 조절이 완료된 양액을 30분 간격으로 조금씩 자주 
공급하여 뿌리가 항상 젖어있게 하는 펄스 관수 기법이 쓰입니다. 반면 수동 제어는 사람이 시계를 보며
정해진 시간에 펌프 스위치를 켜서 모터를 돌리고, 알람 맞춰 두었다가 꺼주는 식입니다. 혹은 아예 타이머 
장치 없이 관리자가 경험에 따라 “오늘은 날이 더우니 한 번 더 물 주자”며 임의로 펌프를 추가 가동하기도
합니다. 규모가 큰 시설에서는 수동으로 하기는 어려워 대부분 자동화를 도입하지만, 소규모 하우스에서는 
아직도 타이머 콘센트에 펌프를 꽂아 설정해두거나, 그냥 사람이 직접 온오프하는 경우도 존재합니다.
분류	제어 방식	설명	예시 사용처
①	ON/OFF 제어	조건 만족 시 단순 ON/OFF	펌프, 환풍기, 히터
②	타이머 제어	일정 시간 간격으로 반복 동작	순환펌프, LED 주기 제어
③	Duty 제어 (비율제어)	전체 시간 중 일부 비율만 ON	CO₂ 공급, 공기 순환
④	히스테리시스 제어	설정값 ±허용폭 내에서 전환	온도, 습도 제어에 많이 사용
⑤	PID 제어	오차에 따라 출력 연속 제어 (비례, 적분, 미분)	냉온수기, 히트펌프, 보일러
⑥	비례제어 (Proportional Control)	입력에 따라 선형 비례 출력	팬 속도, 밸브 개도율
⑦	조건부 제어 (If-Else)	다중 센서 또는 외부 조건 고려	풍속 + 일사량 + 온도 조건 시 창문 제어
⑧	스케줄 기반 제어	시간표에 따라 제어 (RTC)	조명, 양액 공급, 개폐
⑨	센서 피드백 제어	실시간 센서값에 따라 연속 조정	함수율 기반 관수
⑩	AI/ML 기반 예측 제어	예측 모델 기반 제어	에너지 절감형 HVAC, 스마트팜 작물별 맞춤 관수


"""